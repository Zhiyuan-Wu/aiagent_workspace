# 神经架构搜索（NAS）实验计划

## 1. 背景与动机

### 1.1 当前模型选择的问题

**当前实现**（`models.py`, `workflow.py`）：
- 手工设计模型架构（MLP: [512,256,128], Twin-Tower: [256,128,64]）
- 未系统验证架构选择是否最优
- 依赖经验和试错，缺乏科学依据
- 架构搜索空间巨大，难以穷举

**主要问题**：
1. **搜索空间效率低**：手动尝试有限架构，可能错过更优配置
2. **超参数调优复杂**：架构-超参数联合优化困难
3. **泛化能力不确定**：未见过的架构可能表现更好
4. **计算资源浪费**：训练多个模型，效果不理想

### 1.2 神经架构搜索优势

**核心思想**：自动化搜索最优神经网络架构，在固定数据（200+因子）基础上提升topk选择性能

**理论依据**：
- **No Free Lunch (NFL) Theorem**：在验证集上评估的架构搜索方法，理论上性能无偏
- **复杂性-性能权衡**：自动找到性能与复杂度的最优平衡点
- **可复现性**：标准化搜索流程，可复用于其他策略

**预期效果**：
- **准确性提升**：IC提升0.005-0.015（更优的架构）
- **年化收益提升**：从当前~9-11%提升至~12-15%
- **稳定性提升**：IC标准差降低15-25%，ICIR提升

---

## 2. 实验设计原则

### 2.1 固定条件

为避免混淆变量，以下参数在所有实验中保持固定：

- **特征**：使用现有200+因子（不做任何修改）
- **标签**：使用当前2日收益率（不做任何修改）
- **排序方法**：自适应边界聚焦（使用最优参数）
- **数据范围**：2017-2020年测试集
- **训练数据**：2008-2014年训练集，2015-2016年验证集
- **随机种子**：固定为42（确保可复现性）
- **训练时间**：统一训练20 epochs（PyTorch模型）

### 2.2 评估标准

- **主要指标**：验证集年化收益率（用于选择最优架构）
- **辅助指标**：IC、Rank IC、夏普比率、最大回撤、ICIR
- **效率指标**：总参数量、训练时间、推理时间

### 2.3 搜索空间设计

**搜索维度**：
1. **网络深度**：层数范围[2, 6]
2. **网络宽度**：每层神经元数范围[32, 512]
3. **跳跃连接**：是否使用残差连接
4. **归一化**：BatchNorm / LayerNorm / None
5. **激活函数**：ReLU / LeakyReLU / Swish / GELU
6. **Dropout**：Dropout率范围[0.1, 0.5]
7. **辅助任务**：无 / 回报预测 / 特征重建

**搜索空间大小**：
- 理论组合数：>100,000
- 实际搜索：通过采样和剪枝降低到1,000-5,000个架构

### 2.4 架构搜索方法对比

| 搜索方法 | 类型 | 优势 | 劣势 | 预期时间 |
|---------|------|------|------|----------|
| Random Search | 随机采样 | 简单，无偏 | 效率低 | 20-30小时 |
| Grid Search | 网格搜索 | 全面，易于并行 | 维数灾难 | 100+小时 |
| Bayesian Optimization | 贝叶斯优化 | 样本高效 | 需要定义先验 | 40-60小时 |
| Evolutionary | 进化算法 | 全局搜索 | 计算密集 | 60-80小时 |
| DARTS | 梯度学习器 | 高效，自适应 | 实现复杂 | 30-50小时 |
| ENAS | 网络架构搜索 | 样本高效 | 搜索空间受限 | 20-40小时 |

---

## 3. 实验列表

### 实验 0: Baseline模型训练

**目标**：建立当前手工设计模型的性能基准

**设置描述**：
- 模型1：MLP [512, 256, 128]（当前默认）
- 模型2：ResidualMLP [512, 256, 128]
- 模型3：Twin-Tower [256, 128, 64]

**预期性能**（基于历史运行）：
```
MLP [512,256, 128]:
  - IC: 0.030-0.040
  - 年化收益率: 7-9%
  - 夏普比率: 0.85-1.05
  - 最大回撤: 32-38%
  - 训练时间: 5-8小时

ResidualMLP [512, 256, 128]:
  - IC: 0.032-0.041
  - 年化收益率: 7-11%
  - 夏普比率: 0.88-1.08
  - 最大回撤: 31-36%
  - 训练时间: 6-9小时

Twin-Tower [256, 128, 64]:
  - IC: 0.030-0.038
  - 年化收益率: 7-10%
  - 夏普比率: 0.82-1.00
  - 最大回撤: 33-40%
  - 训练时间: 5-7小时
```

---

### 实验 1: 随机搜索（Random Search）

**目标**：建立随机搜索基准，评估搜索空间大小

**变量**：随机采样数量

**详细配置对比**：

**配置1: 小规模随机采样（50个架构）**
- 采样策略：完全随机
- 架构分布：
  - 深度：[2, 3, 4, 5, 6] 均匀
  - 宽度：每层从[64, 128, 256, 512]随机选择
  - 残差连接：50%概率
  - 归一化：BatchNorm/LayerNorm/None 均等
  - 激活函数：ReLU/LeakyReLU/Swish 均等
  - Dropout：[0.1, 0.3, 0.5] 均等
- 训练：每个架构训练10 epochs（快速验证）
- 预期效果：
  - 最优架构：IC ~0.033-0.041，年化收益率 ~10-12%
  - Top5架构平均：IC ~0.031，年化收益率 ~9-11%
  - 搜索时间：15-20小时
- 优点：简单，无偏
- 缺点：效率低，可能错过最优架构

**配置2: 中等规模随机采样（200个架构）**
- 采样策略：完全随机
- 架构分布：同配置1
- 训练：每个架构训练10 epochs
- 预期效果：
  - 最优架构：IC ~0.034-0.042，年化收益率 ~10-13%
  - Top5架构平均：IC ~0.032，年化收益率 ~9-10%
  - 搜索时间：25-35小时
- 优点：覆盖更广搜索空间
- 缺点：计算成本高

**配置3: 大规模随机采样（500个架构）**
- 采样策略：完全随机
- 架构分布：同配置1
- 训练：每个架构训练15 epochs
- 预期效果：
  - 最优架构：IC ~0.035-0.043，年化收益率 ~11-14%
  - Top5架构平均：IC ~0.033，年化收益率 ~10-11%
  - 搜索时间：40-60小时
- 优点：最高概率找到全局最优
- 缺点：计算资源消耗大

**关键假设**：
- 随机采样能找到优于手工设计的架构
- 但效率极低，大量计算资源浪费
- 需要更高效的搜索方法

**评估方法**：
- 对比各配置的最优架构性能
- 绘制随机采样数量 vs 最优性能曲线
- 分析最优架构的共性特征

---

### 实验 2: 网格搜索（Grid Search）

**目标**：系统性探索关键维度

**变量**：网格搜索维度

**详细配置对比**：

**配置1: 深度优先网格搜索**
- 搜索维度1：网络深度（层数）
  - 取值：[2, 3, 4, 5, 6]
  - 固定宽度：每层256神经元
- 搜索维度2：残差连接
  - 取值：有/无
- 其他维度：固定
  - 总配置数：5 × 2 = 10
- 训练：每个架构训练20 epochs
- 预期效果：
  - 最优架构：4-5层，有残差，IC ~0.036-0.044
  - 年化收益率：11-13%
  - 搜索时间：20-30小时（可并行）
- 优点：系统探索深度影响
- 缺点：未探索宽度维度

**配置2: 宽度优先网格搜索**
- 搜索维度1：每层宽度
  - 取值：[64, 128, 256, 512]
  - 固定深度：4层
- 搜索维度2：残差连接
  - 取值：有/无
- 其他维度：固定
- 总配置数：4 × 2 = 8
- 训练：每个架构训练20 epochs
- 预期效果：
  - 最优架构：256或512宽度，有残差，IC ~0.034-0.042
  - 年化收益率：10-12%
  - 搜索时间：15-25小时（可并行）
- 优点：系统探索宽度影响
- 缺点：未探索深度维度

**配置3: 深度+宽度联合搜索**
- 搜索空间：
  - 深度 × 宽度组合：
    - [2, 64], [2, 128], [2, 256], [2, 512]
    - [3, 128], [3, 256], [3, 512]
    - [4, 128], [4, 256], [4, 512]
    - [5, 256], [5, 512]
  - [6, 256], [6, 512]
- 残差连接：固定为有
- 总配置数：16
- 训练：每个架构训练20 epochs
- 预期效果：
  - 最优架构：4-5层，256-512宽度，IC ~0.037-0.045
  - 年化收益率：12-14%
  - 搜索时间：30-45小时（可并行）
- 优点：全面探索深度-宽度权衡
- 缺点：计算成本高

**配置4: 三维网格搜索（深度×宽度×残差）**
- 搜索空间：配置3的2倍（包含残差连接无）
- 总配置数：32
- 训练：每个架构训练20 epochs
- 预期效果：
  - 最优架构：4-6层，256-512宽度，有残差，IC ~0.037-0.046
  - 年化收益率：12-14%
  - 搜索时间：50-70小时（高度并行）
- 优点：最全面的搜索
- 缺点：计算资源要求极高

**关键假设**：
- 网格搜索能找到关键维度的最优值
- 但维度灾难限制搜索空间
- 深度4-5层，宽度256-512可能最优

**评估方法**：
- 热力图：年化收益率 vs (深度, 宽度)
- 最优架构特征分析
- 计算成本 vs 性能提升权衡

---

### 实验 3: 贝叶斯优化（Bayesian Optimization）

**目标**：利用历史搜索结果指导新架构采样

**变量**：贝叶斯优化方法

**详细配置对比**：

**配置1: Gaussian Process - 预期改进（EI）**
- 目标函数：验证集年化收益率（需要最大化）
- 核函数：Matérn 5/2
  - 长度尺度：基于最大深度设置
  - 核函数：Matérn 3/2
  - 宽度尺度：基于每层宽度设置
- 采集函数：Expected Improvement (EI)
  - 初始点：当前最优架构
  - 迭代次数：20
- 每次训练：建议架构训练20 epochs
- 预期效果：
  - 最优架构：4-5层，384-256-128宽度，IC ~0.038-0.046
  - 年化收益率：13-15%
  - 搜索时间：10-15小时
- 优点：样本高效，利用历史信息
- 缺点：需要手动调参

**配置2: Tree-structured Parzen Estimator (TPE)**
- 目标函数：验证集年化收益率
- 核函数： squared-exponential kernel
- 采集函数：Expected Improvement per Second (EIS)
- 优化空间：
  - 深度：[2, 3, 4, 5, 6]
  - 宽度：[64, 128, 256, 512]
  - 残差连接：二值变量
  - 归一化：三分类（BatchNorm/LayerNorm/None）
  - 激活函数：三分类（ReLU/LeakyReLU/Swish）
- 迭代次数：50
- 每次训练：建议架构训练20 epochs
- 预期效果：
  - 最优架构：4层，512-256宽度，LayerNorm，Swish，IC ~0.039-0.047
  - 年化收益率：13-15%
  - 搜索时间：15-20小时
- 优点：自动平衡探索与利用
- 缺点：实现复杂

**配置3: Gaussian Process - 上界（UCB）**
- 目标函数：验证集IC（需要最大化）
- 核函数：Matérn 5/2
- 采集函数：Upper Confidence Bound (UCB)
- 初始点：随机采样5个架构
- 迭代次数：30
- 每次训练：建议架构训练15 epochs
- 预期效果：
  - 最优架构：4层，256-256宽度，LeakyReLU，IC ~0.040-0.048
  - 年化收益率：14-16%
  - 搜索时间：12-18小时
- 优点：全局优化，适合大规模搜索
- 缺点：计算成本高

**关键假设**：
- 贝叶斯优化比随机搜索高效
- 核函数和采集函数选择至关重要
- 需要合理设置搜索空间约束

**评估方法**：
- 收敛曲线：最优目标函数值 vs 迭代次数
- 最优架构 vs Baseline对比
- 计算效率：性能提升 / 搜索时间

---

### 实验 4: 进化算法搜索（Evolutionary）

**目标**：利用进化算法全局搜索架构

**变量**：进化算法类型

**详细配置对比**：

**配置1: 遗传算法（Genetic Algorithm）**
- 编码方式：直接编码（网络结构序列）
  - 例如：[2, 256, 128, 64, ReLU, 0.3, BatchNorm]
- 种群大小：50
- 迭代次数：20代
- 选择策略：轮盘赌 + 精英保留
- 变异操作：
  - 单点变异：改变一层宽度
  - 增加层：在随机位置插入层
  - 删除层：删除随机层
  - 激活函数变异：ReLU ↔ LeakyReLU ↔ Swish
- 交叉概率：0.7
- 变异概率：0.2
- 精英保留：最优20%直接进入下一代
- 适配度评估：每个架构训练10 epochs
- 预期效果：
  - 最优架构：5层，512-256-64宽度，Swish，LayerNorm，IC ~0.041-0.049
  - 年化收益率：14-16%
  - 搜索时间：25-35小时
- 优点：全局搜索，跳出局部最优
- 缺点：实现复杂度高

**配置2: 进化策略（Evolution Strategy）**
- 编码方式：间接编码（网络参数）
- 种群大小：50
- 迭代次数：30代
- 策略：μ + λ（第5代开始引入变异）
- 变异操作：同配置1
- 交叉概率：0.6
- 变异概率：0.1-0.2（随代递减）
- 适配度评估：每个架构训练15 epochs
- 预期效果：
  - 最优架构：4层，256-128-64宽度，LeakyReLU，IC ~0.040-0.047
  - 年化收益率：13-15%
  - 搜索时间：30-40小时
- 优点：成熟稳定
- 缺点：超参敏感

**配置3: 差分进化（Differential Evolution）**
- 编码方式：间接编码
- 种群大小：100
- 迭代次数：20代
- 变异操作：
  - 交叉：两点交叉
  - 变异：加高斯噪声扰动
  - 选择：最优个体保留
- 交叉概率：0.9
- 变异强度：随代递减
- 适配度评估：每个架构训练20 epochs
- 预期效果：
  - 最优架构：5层，512-256-64宽度，GELU，IC ~0.042-0.048
  - 年化收益率：14-16%
  - 搜索时间：35-50小时
- 优点：保留多样性
- 缺点：计算密集

**关键假设**：
- 进化算法能找到优于手工设计的架构
- 全局搜索能力优于随机/网格搜索
- 需要足够的迭代次数和种群大小

**评估方法**：
- 最优目标函数值 vs 代数曲线
- 种群多样性分析
- 收敛速度评估

---

### 实验 5: DARTS搜索

**目标**：利用梯度信息高效搜索架构

**变量**：DARTS变体

**详细配置对比**：

**配置1: DARTS (Differentiable ARchiTecture Search)**
- 搜索空间：连续松弛（网络层数、宽度等）
- 超松弛编码：
  - 层数：softmax分布，温度衰减
  - 宽度：softmax分布，温度衰减
- 采样策略：Gumbel-Top-k（Top-8）
- 更新策略：LSTM控制器
- 迭代次数：100
- 每次训练：建议架构训练15 epochs
- 预期效果：
  - 最优架构：4-5层，512-256-128宽度，IC ~0.042-0.047
  - 年化收益率：13-15%
  - 搜索时间：30-40小时
- 优点：梯度指导，高效
- 缺点：实现复杂，长训练时间

**配置2: HyperAS + 小模型搜索**
- 搜索空间：
  - 超参数：层数[2,6], 宽度[64,512]
  - 操作：增层，删除层，改变宽度，跳过连接
- 评估模型：训练5 epochs快速评估
- 超时序搜索：
  - Epoch 1-20: 随机搜索架构空间
  - Epoch 21-40: 基于前20最优架构局部搜索
- 预期效果：
  - 最优架构：4-6层，256-256宽度，IC ~0.041-0.045
  - 年化收益率：13-15%
  - 搜索时间：25-35小时
- 优点：高效并行搜索
- 缺点：早期架构质量影响后续

**配置3: CDARTS（Continuous DARTS）**
- 搜索空间：连续松弛（类似配置1）
- 采样策略：Gumbel-Top-k（Top-16）
- 更新策略：双向LSTM控制器
- 迭代次数：150
- 每次训练：建议架构训练20 epochs
- 预期效果：
  - 最优架构：5层，512-256-128宽度，IC ~0.043-0.048
  - 年化收益率：14-16%
  - 搜索时间：40-60小时
- 优点：稳定收敛
- 缺点：实现最复杂

**关键假设**：
- DARTS能高效探索搜索空间
- 梯度信息能加速搜索
- 需要大量计算资源（GPU）

**评估方法**：
- 控制器预测不确定性曲线
- 最优架构 vs Baseline对比
- 搜索效率（性能提升/搜索时间）

---

### 实验 6: ENAS（Efficient Neural Architecture Search）

**目标**：使用高效网络架构搜索

**变量**：ENAS搜索策略

**详细配置对比**：

**配置1: ENAS - 标准版**
- 搜索空间：
  - 宏观架构：[2, 3, 4, 5, 6]层
  - 每层宽度：[32, 64, 128, 256, 512]
- 宏观搜索空间大小：~10,000
- 搜索策略：最大化期望提升（EI）
- 评估模型：训练5 epochs快速评估
- 迭代次数：100
- 预期效果：
  - 最优架构：4-5层，256-256宽度，IC ~0.040-0.045
  - 年化收益率：12-14%
  - 搜索时间：15-25小时
- 优点：高效，成熟
- 缺点：搜索空间受限（<20层）

**配置2: ENAS + 搜索空间扩展**
- 搜索空间：
  - 宏观架构：[2, 3, 4, 5, 6]层
  - 每层宽度：[32, 64, 128, 256, 512]
  - 延长操作：通过Skip连接最深6层
- 宏观搜索空间大小：~50,000
- 搜索策略：最大化期望改进（EI）
- 评估模型：训练5 epochs
- 迭代次数：150
- 预期效果：
  - 最优架构：5-6层，512-256-128宽度，IC ~0.042-0.047
  - 年化收益率：13-15%
  - 搜索时间：20-30小时
- 优点：更大搜索空间
- 缺点：搜索时间略长

**配置3: FBNet-style NAS + Cell搜索**
- 搜索空间：
  - 宏观架构：RNN Cell类型
  - Cell选项：Basic, LSTM, GRU
  - 宏观搜索空间：固定为3层
  - 搜索策略：随机搜索
- 评估模型：训练10 epochs
- 预期效果：
  - 最优架构：3层LSTM，256宽度，IC ~0.038-0.043
  - 年化收益率：11-13%
  - 搜索时间：10-15小时
- 优点：适合序列数据
  - 缺点：可能不如MLP

**配置4: ProxylessNAS + 候候选**
- 搜索空间：
  - 候候选：[32, 64, 128, 256, 512]
  - 层数：动态生成（2-6层）
- 搜索策略：预测器引导搜索
- 评估模型：训练5 epochs
- 迭代次数：200
- 预期效果：
  - 最优架构：4-5层，256-256宽度，IC ~0.041-0.045
  - 年化收益率：13-15%
  - 搜索时间：25-35小时
- 优点：高效，灵活
- 缺点：实现复杂

**关键假设**：
- ENAS效率高于进化算法
- 宏观搜索空间需要精心设计
- 评估模型质量影响搜索效果

**评估方法**：
- 各ENAS变体性能对比
- 搜索效率（架构/小时）
- 最优架构特征分析

---

### 实验 7: 权衡搜索（Efficiency-Accuracy Trade-off）

**目标**：平衡搜索效率与性能

**变量**：搜索资源分配策略

**详细配置对比**：

**配置1: 时间限制搜索（30小时）**
- 搜索方法：ENAS + 随机搜索
- 搜索策略：前20小时ENAS，后10小时随机
- 搜索空间：完整（50,000架构）
- 预期效果：
  - 最优架构：4-5层，256-256宽度，IC ~0.039-0.043
  - 年化收益率：12-14%
  - 搜索时间：30小时
  - 优点：可控时间成本
  - 缺点：可能未找到全局最优

**配置2: 固定预算搜索（200架构）**
- 搜索方法：贝叶斯优化 + 随机搜索
- 搜索策略：前100次迭代贝叶斯，后100次随机
- 搜索空间：完整（50,000架构）
- 预期效果：
  - 最优架构：4-5层，512-256宽度，IC ~0.040-0.044
  - 年化收益率：13-15%
  - 搜索时间：25-35小时
  - 优点：固定预算
  - 缺点：可能浪费资源

**配置3: 渐进式搜索（3阶段）**
- 阶段1（10小时）：粗搜索
  - 搜索空间：50,000架构，随机采样
  - 阶段2（15小时）：中搜索
  - 基于阶段1最优，网格搜索关键维度
  - 阶段3（20小时）：精搜索
  - 基于阶段2最优，贝叶斯优化
- 预期效果：
  - 最优架构：4-6层，512-256-128宽度，IC ~0.042-0.046
  - 年化收益率：14-16%
  - 搜索时间：45小时
  - 优点：平衡效率与性能
  - 缺点：需要手动设计阶段

**配置4: 早停策略**
- 搜索方法：ENAS + 随机搜索
- 早停条件：验证集IC连续10个架构无提升
- 搜索空间：完整（50,000架构）
- 预期效果：
  - 最优架构：4-5层，256-256宽度，IC ~0.039-0.043
  - 年化收益率：12-14%（可能与配置1类似）
  - 搜索时间：20小时（节省40%）
  - 优点：节省资源
  - 缺点：可能过早停止

**关键假设**：
- 渐进式搜索平衡效率和性能
- 早停策略节省计算资源但可能牺牲性能

**评估方法**：
- 对比各配置的时间-性能曲线
- 分析早停有效性
- 成本-收益分析

---

## 4. 实验执行与评估流程

### 4.1 执行顺序

```
实验0（Baseline训练）
    ↓
实验1（Random Search）→ 评估搜索空间大小影响
    ↓
实验2（Grid Search）→ 确定关键维度最优值
    ↓
实验3（Bayesian Opt）→ 高效搜索
    ↓
实验4（Evolutionary）→ 全局优化
    ↓
实验5（DARTS）→ 梯度引导搜索
    ↓
实验6（ENAS）→ 高效架构搜索
    ↓
实验7（Trade-off）→ 平衡效率与性能
    ↓
综合分析与最优架构推荐
```

### 4.2 结果记录

每个实验需要记录以下指标：

**架构信息**：
- 深度（层数）
- 宽度（每层神经元数）
- 残差连接（有/无）
- 归一化类型
- 激活函数
- Dropout率
- 总参数量

**性能指标**：
- IC, Rank IC, ICIR
- 年化收益率、夏普比率、最大回撤
- 训练时间、推理时间
- 相对Baseline提升

**结果存储路径**：
```
data/experiments/nas/
├── exp00_baseline/
│   ├── config.json
│   ├── results.csv
│   └── plots/
├── exp01_random_search/
├── exp02_grid_search/
├── ...
└── exp07_tradeoff/
```

### 4.3 可视化分析

**关键可视化**：

1. **搜索过程曲线**
   - 最优目标函数值 vs 迭代次数
   - 当前最优架构演化

2. **架构性能对比**
   - 各方法最优架构性能对比（柱状图）
   - 搜索效率对比（架构/小时）

3. **深度-宽度热力图**
   - 年化收益率 vs (深度, 宽度)
   - 最优架构标记

4. **残差连接效果**
   - 有/无残差连接性能对比
   - 不同深度下差异

5. **归一化类型对比**
   - BatchNorm vs LayerNorm vs None
   - 不同深度下的效果

6. **激活函数对比**
   - ReLU vs LeakyReLU vs Swish vs GELU
   - 性能 vs 训练速度

---

## 5. 预期贡献

### 5.1 性能提升预期

基于NAS理论和实证分析，预期达到以下效果：

**最坏情况**（随机搜索仅找到Baseline架构）：
- IC提升：+0%
- 年化收益提升：+0%
- 搜索时间浪费：20-30小时

**最好情况**（ENAS找到显著更优架构）：
- IC提升：+0.008-0.015（从~0.032到~0.045-0.047）
- 年化收益提升：+4-7%（从~9%到~13-16%）
- IC标准差降低：15-25%

**预期范围**（综合所有方法）：
- IC提升：+0.005-0.012
- 年化收益提升：+3-6%
- 夏普比率提升：+0.1-0.3
- 最大回撤降低：5-10%

### 5.2 学术贡献

- **系统性研究**：NAS在pairwise排序量化投资中的首次系统性应用
- **方法对比**：多种NAS方法的全面比较分析
- **实证分析**：基于A股数据的NAS效果量化研究
- **设计原则**：为量化投资中的NAS应用提供实践指导

### 5.3 实践贡献

- **最优架构推荐**：基于搜索数据的最优MLP架构
- **性能提升**：可操作的3-6%年化收益提升
- **搜索框架**：可复用于其他策略的NAS框架
- **效率提升**：相比手工搜索5-10倍效率

---

## 6. 时间估算

| 实验编号 | 实验名称 | 配置数量 | 预计耗时（小时） |
|---------|---------|---------|----------------|
| 0 | Baseline训练 | 3个模型 | 5-8 |
| 1 | Random Search | 3种配置 | 15-35 |
| 2 | Grid Search | 4种配置 | 15-50 |
| 3 | Bayesian Opt | 3种配置 | 10-20 |
| 4 | Evolutionary | 3种配置 | 25-50 |
| 5 | DARTS | 3种配置 | 30-60 |
| 6 | ENAS | 4种配置 | 15-30 |
| 7 | Trade-off | 4种配置 | 25-50 |
| **总计** | | | **140-303 小时** |

**建议执行周期**：3-4周（每周35-70小时计算时间）

---

## 7. 风险与缓解

### 7.1 技术风险

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| 搜索空间过大 | 无法在合理时间内搜索 | 限制层数[2,6]，宽度[32,512]，总架构<10,000 |
| 过拟合验证集 | 验证集性能不代表测试集 | 时间序列交叉验证，正则化增强 |
| 计算资源需求大 | GPU内存不足，训练慢 | 使用轻量级评估模型，Early Stopping |

### 7.2 业务风险

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| 搜索时间长 | 错失市场机会 | 并行化搜索，优先级搜索 |
| 最优架构过复杂 | 郾以维护，部署困难 | 限制复杂度，参数剪枝 |

### 7.3 实验风险

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| 搜索方法失效 | 未找到优于Baseline的架构 | 多种方法并行，保留至少一种有效方法 |
| 实现复杂度高 | Bug风险 | 分阶段实现，充分测试 |

---

## 8. 成功标准

**实验计划成功的标志**：
1. ✓ 找到相对于Baseline有显著提升（年化收益 > 2%）的最优架构
2. ✓ 理解不同NAS方法对搜索效率和效果的影响规律
3. ✓ 提供可复现的NAS搜索框架
4. ✓ 完成实验报告与可视化分析
5. ✓ 提供明确的架构设计推荐（层数、宽度、残差等）
